<!-- index.html - Jinja template -->

<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Robot â€“ Kognitivni Trening</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <!-- Google Fonts - Lexend za lepÅ¡o tipografijo -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div id="container">
        <!-- LEVI DEL - CHAT OKNO -->
        <div id="chat-panel">
            <div id="chat-header">
                <div class="header-icon">ğŸ¤–</div>
                <div class="header-text">
                    <h1>Robot â€“ Kognitivni Trening</h1>
                    <span class="header-subtitle">Interaktivna simulacija</span>
                </div>
            </div>
            
            <div id="chat-box">
                {% for message in conversation %}
                <div class="message {{ message.sender }}-message">
                    <div class="message-bubble">{{ message.text }}</div>
                </div>
                {% endfor %}
            </div>
            
            <div id="chat-status">
                <div class="status-item">
                    <span class="status-label">Stanje:</span>
                    <span class="status-value" id="status-state">{{ current_state }}</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Eskalacija:</span>
                    <span class="status-value" id="status-escalation">{{ escalation }}</span>
                </div>
                <div class="status-item">
                    <span class="status-label">Koraki:</span>
                    <span class="status-value" id="status-steps">{{ step_count }}</span>
                </div>
            </div>
        </div>
        
        <!-- DESNI DEL - TRIGGER PANEL -->
        <div id="trigger-panel">
            <h3>Simuliraj Trigger</h3>
            <p class="trigger-hint">Kliknite na trigger za simulacijo uporabnikovega vedenja</p>
            
            <!-- POZITIVNI TRIGGERJI -->
            <div class="trigger-group positive">
                <h4>âœ¨ Pozitivni signali</h4>
                {% if triggers.positive %}
                    {% for trigger in triggers.positive %}
                    <button class="trigger-btn positive-btn" onclick="sendTrigger('{{ trigger }}')">
                        {{ trigger }}
                    </button>
                    {% endfor %}
                {% else %}
                    <button class="trigger-btn positive-btn" onclick="sendTrigger('User smiles / laughs')">User smiles / laughs</button>
                    <button class="trigger-btn positive-btn" onclick="sendTrigger('Positive affect')">Positive affect</button>
                {% endif %}
            </div>
            
            <!-- NEVTRALNI TRIGGERJI -->
            <div class="trigger-group neutral">
                <h4>â¸ï¸ Nevtralni signali</h4>
                {% if triggers.neutral %}
                    {% for trigger in triggers.neutral %}
                    <button class="trigger-btn neutral-btn" onclick="sendTrigger('{{ trigger }}')">
                        {{ trigger }}
                    </button>
                    {% endfor %}
                {% else %}
                    <button class="trigger-btn neutral-btn" onclick="sendTrigger('Long silence')">Long silence</button>
                    <button class="trigger-btn neutral-btn" onclick="sendTrigger('User confused / waiting')">User confused / waiting</button>
                {% endif %}
            </div>
            
            <!-- NEGATIVNI TRIGGERJI -->
            <div class="trigger-group negative">
                <h4>âš ï¸ Negativni signali</h4>
                {% if triggers.negative %}
                    {% for trigger in triggers.negative %}
                    <button class="trigger-btn negative-btn" onclick="sendTrigger('{{ trigger }}')">
                        {{ trigger }}
                    </button>
                    {% endfor %}
                {% else %}
                    <button class="trigger-btn negative-btn" onclick="sendTrigger('User frustrated / overloaded')">User frustrated / overloaded</button>
                    <button class="trigger-btn negative-btn" onclick="sendTrigger('User decreasing engagement')">User decreasing engagement</button>
                {% endif %}
            </div>
            
            <!-- ZAKLJUÄŒNI TRIGGERJI -->
            <div class="trigger-group final">
                <h4>ğŸ ZakljuÄni signali</h4>
                {% if triggers.final %}
                    {% for trigger in triggers.final %}
                    <button class="trigger-btn final-btn" onclick="sendTrigger('{{ trigger }}')">
                        {{ trigger }}
                    </button>
                    {% endfor %}
                {% else %}
                    <button class="trigger-btn final-btn" onclick="sendTrigger('Task completed')">Task completed</button>
                    <button class="trigger-btn final-btn" onclick="sendTrigger('User wants to stop')">User wants to stop</button>
                {% endif %}
            </div>
            
            <!-- RESET GUMB -->
            <div class="reset-container">
                <button id="reset-session" onclick="resetSession()">
                    ğŸ”„ Nova seja (reset)
                </button>
            </div>
        </div>
    </div>
    
    <!-- Notification za END stanje -->
    <div id="end-notification" class="hidden">
        <div class="notification-content">
            <h3>ğŸ‰ Seja zakljuÄena</h3>
            <p>Trening je bil uspeÅ¡no zakljuÄen.</p>
            <button onclick="resetSession()">ZaÄni novo sejo</button>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>

